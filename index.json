[{"content":"1. Favicon Generator 首先为网站添加一个Icon，这里直接使用这个网站Favicon Generator. For real.，上传任意一张喜欢的图片即可生成各种平台需要的favicon。点击下载，将所有图片资源保存在static目录下\n2. PaperMod Theme Config 2.1 Favicon 在上一步保存了整个网站的Icon资源，接下来可以在config.yaml文件中配置favicon\nparams: assets: # disableHLJS: true # to disable highlight.js # disableFingerprinting: true favicon: /favicon.ico favicon16x16: /favicon-16x16.png favicon32x32: /favicon-32x32.png apple_touch_icon: /apple-touch-icon.png safari_pinned_tab: /favicon.ico label: text: \u0026#34;Home\u0026#34; icon: /apple-touch-icon.png iconHeight: 35 2.2 Taxonomies Taxonomies用于给所有博客按标签归档，默认支持三种categories、tags、series，需要在config.yaml中声明：\ntaxonomies: category: categories tag: tags series: series 只需要在markdown中声明即可自动归档\n--- title: \u0026#34;Hugo On Mac\u0026#34; date: 2021-12-12T11:18:58+08:00 tags: [\u0026#34;hugo\u0026#34;, \u0026#34;github pages\u0026#34;, \u0026#34;typora\u0026#34;, \u0026#34;picgo\u0026#34;, \u0026#34;mathjax\u0026#34;, \u0026#34;utteranc\u0026#34;] categories: [\u0026#34;tools\u0026#34;] series: [\u0026#34;hugo on mac\u0026#34;] summary: \u0026#34;Hugo + Github Pages + Typora搭建Markdown博客\u0026#34; draft: false --- 开启后可以在将菜单选项展示到页面顶部，weight决定菜单顺序：\nmenu: main: - name: Archive url: archives/ weight: 5 - name: Tags url: tags/ weight: 10 - name: Categories url: categories/ weight: 15 - name: Series url: series/ weight: 20 - name: Search url: search/ weight: 25 2.3 Search \u0026amp;\u0026amp; Archive Search也是PaperMod主题支持的，首先添加文件content/search.md\n--- title: \u0026#34;Search\u0026#34; # in any language you want layout: \u0026#34;search\u0026#34; # is necessary url: \u0026#34;/search/\u0026#34; # description: \u0026#34;Description for Search\u0026#34; summary: \u0026#34;search\u0026#34; --- 然后修改config.yaml\noutputs: home: - HTML - RSS - JSON # is necessary 还有一些搜索相关参数保持默认即可\nparams: fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] Archive的支持只需要添加文件content/archives.md\n--- title: \u0026#34;Archive\u0026#34; layout: \u0026#34;archives\u0026#34; url: \u0026#34;/archives/\u0026#34; summary: archives --- 最终效果如下：\n2.4 Archetypes Hugo支持默认模板，当执行hugo new blog.md时使用模板生成blog.md，可以在创建markdown时自动添加部分属性，修改archetypes/default.md\n--- title: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; date: {{ .Date }} tags: [\u0026#34;\u0026#34;] categories: [\u0026#34;\u0026#34;] series: [\u0026#34;\u0026#34;] summary: \u0026#34;Summary todo\u0026#34; draft: false editPost: URL: \u0026#34;https://github.com/Zhoutao822/zhoutao822.github.io/tree/main/content/\u0026#34; Text: \u0026#34;Suggest Changes\u0026#34; appendFilePath: true --- 2.5 其他设置 baseURL: \u0026#39;https://zhoutao822.github.io/\u0026#39; languageCode: en-us title: Tao\u0026#39;s Notes theme: PaperMod paginate: 5 enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true params: env: production # to enable google analytics, opengraph, twitter-cards and schema. title: Tao\u0026#39;s Notes description: \u0026#34;Tao\u0026#39;s learning notes\u0026#34; keywords: [Blog, Portfolio, PaperMod] author: Me images: [\u0026#34;\u0026lt;link or path of image for opengraph, twitter-cards\u0026gt;\u0026#34;] DateFormat: \u0026#34;January 2, 2006\u0026#34; defaultTheme: dark # dark, light, auto disableThemeToggle: true ShowReadingTime: true ShowShareButtons: false ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: true disableSpecial1stPost: false disableScrollToTop: false hidemeta: false hideSummary: false showtoc: true tocopen: false comments: true utteranc: enable: true repo: \u0026#34;zhoutao822/zhoutao822.github.io\u0026#34; issueTerm: \u0026#34;title\u0026#34; theme: \u0026#34;github-dark\u0026#34; assets: # disableHLJS: true # to disable highlight.js # disableFingerprinting: true favicon: /favicon.ico favicon16x16: /favicon-16x16.png favicon32x32: /favicon-32x32.png apple_touch_icon: /apple-touch-icon.png safari_pinned_tab: /favicon.ico label: text: \u0026#34;Home\u0026#34; icon: /apple-touch-icon.png iconHeight: 35 # profile-mode profileMode: enabled: false # needs to be explicitly set title: ExampleSite subtitle: \u0026#34;This is subtitle\u0026#34; imageUrl: \u0026#34;\u0026lt;img location\u0026gt;\u0026#34; imageWidth: 120 imageHeight: 120 imageTitle: my image buttons: - name: Posts url: posts - name: Tags url: tags # home-info mode homeInfoParams: Title: \u0026#34;Hi there \\U0001F44B\u0026#34; Content: Welcome to my blog socialIcons: - name: github url: \u0026#34;https://github.com/Zhoutao822/\u0026#34; analytics: google: SiteVerificationTag: \u0026#34;Tao\u0026#34; bing: SiteVerificationTag: \u0026#34;Tao\u0026#34; yandex: SiteVerificationTag: \u0026#34;Tao\u0026#34; cover: hidden: true # hide everywhere but not in structured data hiddenInList: true # hide on list pages and home hiddenInSingle: true # hide on single page editPost: URL: \u0026#34;https://github.com/Zhoutao822/zhoutao822.github.io/tree/main/content\u0026#34; Text: \u0026#34;Suggest Changes\u0026#34; # edit text appendFilePath: true # to append file path to Edit link fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] outputs: home: - HTML - RSS - JSON taxonomies: category: categories tag: tags series: series menu: main: - name: Archive url: archives/ weight: 5 - name: Tags url: tags/ weight: 10 - name: Categories url: categories/ weight: 15 - name: Series url: series/ weight: 20 - name: Search url: search/ weight: 25 3. Mathjax Defects 3.1 mathjax.html 首先需要修改layouts/partials/mathjax.html\n{{ if .Params.mathjax }} \u0026lt;script\u0026gt; MathJax = { tex: { inlineMath: [[\u0026#34;$\u0026#34;, \u0026#34;$\u0026#34;]], processEscapes: true, processEnvironments: true }, displayMath: [ [\u0026#34;$$\u0026#34;, \u0026#34;$$\u0026#34;], [\u0026#34;\\[\u0026#34;, \u0026#34;\\]\u0026#34;], ], svg: { fontCache: \u0026#34;global\u0026#34;, }, }; \u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;https://polyfill.io/v3/polyfill.min.js?features=es6\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script id=\u0026#34;MathJax-script\u0026#34; async src=\u0026#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ end }} 需要添加processEscapes: true，否则行内数学公式无法正常显示。\n3.2 issues 属性$a_k = \\underset{a \\in A}{\\arg \\max Gain(D, a)}$。 $$ Gain\\_ratio(D, a) = \\frac{Gain(D,a)}{IV(a)} \\\\ IV(a) = -\\sum^V_{v=1}\\frac{|D^v|}{|D|} \\log_2\\frac{|D^v|}{|D|} $$ $$ Gini(D) = \\sum^{|\\mathbb{Y}|}_{k=1}\\sum_{k\u0026#39; \\neq k}p_kp_{k\u0026#39;} \\\\ = 1- \\sum^{|\\mathbb{Y}|}_{k=1}p_k^2 $$ 就算修改了mathjax.html或者使用katex，这里无法避免转义字符的问题，期望的显示效果如上，但是实际效果如下\n第一点就是数学公式中添加\\\\应该实现换行，这里换行失效，第二点就是\\_转义字符期望显示_，但是变成下角标（Gain\\_ratio），第三点就是某些公式可以在Typora中正常渲染，但是在Hugo中无法解析，推测也是跟Hugo渲染相关的问题，这个问题在Hexo中也有（结合MathType和MathJax在Hexo博客中插入数学公式），但是Hexo可以修改其源码来解决这个问题，Hugo不适合修改源码解决。所以最终结论是，在数学公式中不要使用下划线，因为会解析错误，不要使用\\\\实现公式内换行，复杂公式需要检查，当然也可以选择不要在Hugo中使用复杂公式。\n4. PicGo图床 SM.MS图床有资源限制，建议使用gitee或者github作为图床，gitee存在单张图片不能超过2MB的限制，这里就需要使用PicGo的Compress插件picgo-plugin-compress，在mac上安装这个插件可能会安装不上，建议翻墙或者通过命令行安装\n❯ cd ~/Library/Application\\ Support/picgo ❯ rm -rf node_modules ❯ npm install picgo-plugin-compress --save --registry=https://registry.npm.taobao.org --ignore-scripts ❯ npm install --registry=https://registry.npm.taobao.org 参考  Favicon Generator. For real. GitHub + jsDelivr + PicGo + Imagine 打造稳定快速、高效免费图床 结合MathType和MathJax在Hexo博客中插入数学公式 picgo-plugin-compress  ","permalink":"https://zhoutao822.github.io/posts/hugo-theme-papermod/","summary":"PaperMod configurations, favicon generator and mathjax issues","title":"Hugo Theme PaperMod"},{"content":"1. Github Pages设置与配置 首先需要创建一个名称为{OwnerName}.github.io的Public仓库，如果仓库名称为其他，那么最终你的Github Pages的域名就不是https://{OwnerName}.github.io了，而是https://{OwnerName}.github.io/{RepoName}，而且如果这里不是Public而是Private的话，需要付费才能将Private仓库作为Github Pages使用。\n然后创建一个新的分支gh-pages，这个用于后续通过Github Action部署Hugo的静态页面，作为Github Pages的主页；也就是说我们的main分支保存整个Hugo博客工程，而gh-pages分支保存自动生成的静态页面。在仓库Setting下设置Github Pages的Source为gh-pages分支，勾选上Enforce HTTPS，最终访问的域名就是https了。\n最后clone一下这个仓库的main分支到本地即可。\n2. Hugo安装与使用 2.1 Hugo Install 直接通过brew install hugo即可，Homebrew如何安装可以参考官网Homebrew。安装完成后执行hugo version，打印结果如下表明安装成功：\n❯ hugo version hugo v0.90.1+extended darwin/arm64 BuildDate=unknown 2.2 Hugo Init 在clone仓库之后，通过命令行进入到这个仓库的目录下执行hugo new site . --force，初始化Hugo工程，日志如下：\n❯ hugo new site . --force Congratulations! Your new Hugo site is created in /Users/tao/Documents/hugo-blog. Just a few more steps and you're ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026quot;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026quot; command. 2. Perhaps you want to add some content. You can add single files with \u0026quot;hugo new \u0026lt;SECTIONNAME\u0026gt;/\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026quot;. 3. Start the built-in live server via \u0026quot;hugo server\u0026quot;. Visit https://gohugo.io/ for quickstart guide and full documentation. 使用--force是为了能在非空目录中创建Hugo工程。\n2.3 Hugo Theme 在Hugo Theme上挑选一个自己喜欢的主题，然后通过git命令添加主题，以PaperMod为例\ngit submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth=1 后续需要更新主题则执行\ngit submodule update --remote --merge 如果主题安装成功，则项目目录下会多一个.gitmodules文件，内容为\n❯ cat .gitmodules [submodule \u0026#34;themes/PaperMod\u0026#34;] path = themes/PaperMod url = https://github.com/adityatelange/hugo-PaperMod.git 2.4 Hugo Config 然后修改config文件，默认情况下Hugo创建的是config.toml，这里可以删除这个文件，以config.yaml作为替代，依赖个人习惯决定即可；toml和yaml文件可以通过网站Convert TOML to YAML相互转换。\n修改baseURL为Github Pages的域名，并添加theme字段\n❯ cat config.yaml baseURL: \u0026#39;https://zhoutao822.github.io/\u0026#39; languageCode: en-us title: My New Hugo Site theme: PaperMod 2.4 Hugo Local Test 如果上述步骤都完成了，可以通过hugo new创建一个示例Blog\n❯ hugo new posts/my-first-post.md Content \u0026#34;/Users/tao/Documents/hugo-blog/content/posts/my-first-post.md\u0026#34; created 默认情况下Hugo会生成一些模板数据在Markdown中，比如title之类，这里如果需要把draft改为false。\n--- title: \u0026#34;My First Post\u0026#34; date: 2021-12-12T11:18:58+08:00 draft: true --- ## Hello Hugo!  This is the first hugo blog. 最后执行hugo server，在本地部署，访问http://localhost:1313/可以查看效果\n❯ hugo server Start building sites … hugo v0.90.1+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 0 Processed images | 0 Aliases | 2 Sitemaps | 1 Cleaned | 0 Built in 16 ms Watching for changes in /Users/tao/Documents/hugo-blog/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/tao/Documents/hugo-blog/config.yaml Environment: \u0026quot;development\u0026quot; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop PaperMod主题很丰富，需要通过config文件进行配置。\n2.5 Github Action配置 Github Action可以实现Push完成后自动编译并部署，所以需要创建文件.github/workflows/gh-pages.yml，最后将本地工程Push到gihub上即可。\nname: github pages on: push: branches: - main  # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/main\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public push成功后可以查看Github Action进度。\n3. Typora与PicGo 3.1 PicGo安装与配置 通过brew install picgo --cask安装PicGo，用于图片上传，这里我使用的是SM.MS图床，注册账号并生成token即可使用，可以把上传时重命名勾选上。\n3.2 Typora安装与配置 通过brew install typora --cask安装Typora，目前1.0版本后是需要付费使用，0.11版本及之前是免费的；安装完Typora之后需要设置插入图片时的操作，比如在插入本地图片时将图片自动通过PicGo上传到SM.MS图床上，那么Markdown文件中就只需要通过Url显示图片了。\n4. 其它配置 4.1 PaperMod主题配置 参考PaperMod Wiki\nbaseURL: \u0026#39;https://zhoutao822.github.io/\u0026#39; languageCode: en-us title: Tao\u0026#39;s Notes theme: PaperMod paginate: 5 enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true params: env: production # to enable google analytics, opengraph, twitter-cards and schema. title: Tao\u0026#39;s Notes description: \u0026#34;Tao\u0026#39;s learning notes\u0026#34; keywords: [Blog, Portfolio, PaperMod] author: Me # author: [\u0026#34;Me\u0026#34;, \u0026#34;You\u0026#34;] # multiple authors images: [\u0026#34;\u0026lt;link or path of image for opengraph, twitter-cards\u0026gt;\u0026#34;] DateFormat: \u0026#34;January 2, 2006\u0026#34; defaultTheme: auto # dark, light disableThemeToggle: false ShowReadingTime: true ShowShareButtons: true ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: false disableSpecial1stPost: false disableScrollToTop: false comments: false hidemeta: false hideSummary: false showtoc: false tocopen: false assets: # disableHLJS: true # to disable highlight.js # disableFingerprinting: true favicon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; favicon16x16: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; favicon32x32: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; apple_touch_icon: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; safari_pinned_tab: \u0026#34;\u0026lt;link / abs url\u0026gt;\u0026#34; label: text: \u0026#34;Home\u0026#34; icon: /apple-touch-icon.png iconHeight: 35 # profile-mode profileMode: enabled: false # needs to be explicitly set title: ExampleSite subtitle: \u0026#34;This is subtitle\u0026#34; imageUrl: \u0026#34;\u0026lt;img location\u0026gt;\u0026#34; imageWidth: 120 imageHeight: 120 imageTitle: my image buttons: - name: Posts url: posts - name: Tags url: tags # home-info mode homeInfoParams: Title: \u0026#34;Hi there \\U0001F44B\u0026#34; Content: Welcome to my blog socialIcons: - name: twitter url: \u0026#34;https://twitter.com/\u0026#34; - name: stackoverflow url: \u0026#34;https://stackoverflow.com\u0026#34; - name: github url: \u0026#34;https://github.com/\u0026#34; analytics: google: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; bing: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; yandex: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; cover: hidden: true # hide everywhere but not in structured data hiddenInList: true # hide on list pages and home hiddenInSingle: true # hide on single page editPost: URL: \u0026#34;https://github.com/zhoutao822.github.io/content\u0026#34; Text: \u0026#34;Suggest Changes\u0026#34; # edit text appendFilePath: true # to append file path to Edit link # for search # https://fusejs.io/api/options.html fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] menu: main: - identifier: categories name: categories url: /categories/ weight: 10 - identifier: tags name: tags url: /tags/ weight: 20 - identifier: example name: example.org url: https://example.org weight: 30 # Read: https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma # pygmentsUseClasses: true # markup: # highlight: # # anchorLineNos: true # codeFences: true # guessSyntax: true # lineNos: true # style: monokai 4.2 MathJax支持 如果直接在Markdown中插入数学公式，在Typora中是可以正常显示，但是部署到Github Pages后是无法解析的，比如\n--- title: \u0026#34;My First Post\u0026#34; date: 2021-12-12T11:18:58+08:00 draft: false --- ## Hello Hugo! MathJax  $$ \\cos \u0026lt;\\boldsymbol{x, y}\u0026gt; = \\frac{\\sum x_iy_i}{|\\boldsymbol{x}||\\boldsymbol{y}|} $$ 因此需要借助JS库来实现Markdown中Mathjax的渲染，参考在Hugo中使用MathJax。首先创建一个文件layouts/partials/mathjax.html\n{{ if .Params.math }} \u0026lt;script\u0026gt; MathJax = { tex: { inlineMath: [[\u0026#34;$\u0026#34;, \u0026#34;$\u0026#34;]], }, displayMath: [ [\u0026#34;$$\u0026#34;, \u0026#34;$$\u0026#34;], [\u0026#34;\\[\u0026#34;, \u0026#34;\\]\u0026#34;], ], svg: { fontCache: \u0026#34;global\u0026#34;, }, }; \u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;https://polyfill.io/v3/polyfill.min.js?features=es6\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script id=\u0026#34;MathJax-script\u0026#34; async src=\u0026#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ end }} 然后创建layouts/partials/extend_head.html，内容如下，引入mathjax.html；extend_head.html会被hugo自动加载到项目静态资源head.html中。\n{{- partial \u0026#34;mathjax.html\u0026#34; . }} 由于mathjax.html中使用了.Params.math，所以可以通过在Markdown文件头添加math: true字段实现按需渲染\n--- title: \u0026#34;My First Post\u0026#34; date: 2021-12-12T11:18:58+08:00 draft: false math: true --- 最后效果为\n4.3 utteranc评论系统 博客系统必不可少的就是评论系统，utteranc是一个基于Github的评论系统，它是一个Github App，它会将评论转为issue记录在仓库中，没有额外配置。首先安装\n然后创建一个文件layouts/partials/comments.html\n{{ if .Site.Params.utteranc.enable }} \u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;{{ .Site.Params.utteranc.repo }}\u0026#34; issue-term=\u0026#34;{{ .Site.Params.utteranc.issueTerm }}\u0026#34; theme=\u0026#34;{{ .Site.Params.utteranc.theme }}\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; {{ end }} 最后修改config.yaml开启comments并且配置utteranc\nparams: comments: true utteranc: enable: true repo: \u0026#34;zhoutao822/zhoutao822.github.io\u0026#34; issueTerm: \u0026#34;title\u0026#34; theme: \u0026#34;github-dark\u0026#34; 可以到仓库的issue中查看到，此条评论被成功记录。\n参考  Hugo: Deploy Static Site using GitHub Actions Host on GitHub Quick Start utteranc hugo-PaperMod 在Hugo中使用MathJax 给hugo博客添加评论功能  ","permalink":"https://zhoutao822.github.io/posts/hugo-on-mac/","summary":"Hugo + Github Pages + Typora搭建Markdown博客","title":"Hugo On Mac"}]