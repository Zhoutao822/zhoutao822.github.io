<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Hugo On Mac | Tao's Notes</title>
<meta name=keywords content="hugo,github pages,typora,picgo,mathjax,utteranc">
<meta name=description content="Hugo + Github Pages + Typora搭建Markdown博客">
<meta name=author content="Me">
<link rel=canonical href=https://zhoutao822.github.io/posts/hugo-on-mac/>
<meta name=google-site-verification content="Tao">
<meta name=yandex-verification content="Tao">
<meta name=msvalidate.01 content="Tao">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://zhoutao822.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://zhoutao822.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://zhoutao822.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://zhoutao822.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://zhoutao822.github.io/favicon.ico>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.90.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Hugo On Mac">
<meta property="og:description" content="Hugo + Github Pages + Typora搭建Markdown博客">
<meta property="og:type" content="article">
<meta property="og:url" content="https://zhoutao822.github.io/posts/hugo-on-mac/"><meta property="og:image" content="https://zhoutao822.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-12-12T11:18:58+08:00">
<meta property="article:modified_time" content="2021-12-12T11:18:58+08:00"><meta property="og:site_name" content="Tao's Notes">
<meta property="og:see_also" content="https://zhoutao822.github.io/posts/hugo-theme-papermod/">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://zhoutao822.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Hugo On Mac">
<meta name=twitter:description content="Hugo + Github Pages + Typora搭建Markdown博客">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zhoutao822.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Hugo On Mac","item":"https://zhoutao822.github.io/posts/hugo-on-mac/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo On Mac","name":"Hugo On Mac","description":"Hugo + Github Pages + Typora搭建Markdown博客","keywords":["hugo","github pages","typora","picgo","mathjax","utteranc"],"articleBody":"1. Github Pages设置与配置 首先需要创建一个名称为{OwnerName}.github.io的Public仓库，如果仓库名称为其他，那么最终你的Github Pages的域名就不是https://{OwnerName}.github.io了，而是https://{OwnerName}.github.io/{RepoName}，而且如果这里不是Public而是Private的话，需要付费才能将Private仓库作为Github Pages使用。\n然后创建一个新的分支gh-pages，这个用于后续通过Github Action部署Hugo的静态页面，作为Github Pages的主页；也就是说我们的main分支保存整个Hugo博客工程，而gh-pages分支保存自动生成的静态页面。在仓库Setting下设置Github Pages的Source为gh-pages分支，勾选上Enforce HTTPS，最终访问的域名就是https了。\n最后clone一下这个仓库的main分支到本地即可。\n2. Hugo安装与使用 2.1 Hugo Install 直接通过brew install hugo即可，Homebrew如何安装可以参考官网Homebrew。安装完成后执行hugo version，打印结果如下表明安装成功：\n❯ hugo version hugo v0.90.1+extended darwin/arm64 BuildDate=unknown 2.2 Hugo Init 在clone仓库之后，通过命令行进入到这个仓库的目录下执行hugo new site . --force，初始化Hugo工程，日志如下：\n❯ hugo new site . --force Congratulations! Your new Hugo site is created in /Users/tao/Documents/hugo-blog. Just a few more steps and you're ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \"hugo new theme \" command. 2. Perhaps you want to add some content. You can add single files with \"hugo new /.\". 3. Start the built-in live server via \"hugo server\". Visit https://gohugo.io/ for quickstart guide and full documentation. 使用--force是为了能在非空目录中创建Hugo工程。\n2.3 Hugo Theme 在Hugo Theme上挑选一个自己喜欢的主题，然后通过git命令添加主题，以PaperMod为例\ngit submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth=1 后续需要更新主题则执行\ngit submodule update --remote --merge 如果主题安装成功，则项目目录下会多一个.gitmodules文件，内容为\n❯ cat .gitmodules [submodule \"themes/PaperMod\"] path = themes/PaperMod url = https://github.com/adityatelange/hugo-PaperMod.git 2.4 Hugo Config 然后修改config文件，默认情况下Hugo创建的是config.toml，这里可以删除这个文件，以config.yaml作为替代，依赖个人习惯决定即可；toml和yaml文件可以通过网站Convert TOML to YAML相互转换。\n修改baseURL为Github Pages的域名，并添加theme字段\n❯ cat config.yaml baseURL: 'https://zhoutao822.github.io/' languageCode: en-us title: My New Hugo Site theme: PaperMod 2.4 Hugo Local Test 如果上述步骤都完成了，可以通过hugo new创建一个示例Blog\n❯ hugo new posts/my-first-post.md Content \"/Users/tao/Documents/hugo-blog/content/posts/my-first-post.md\" created 默认情况下Hugo会生成一些模板数据在Markdown中，比如title之类，这里如果需要把draft改为false。\n--- title: \"My First Post\" date: 2021-12-12T11:18:58+08:00 draft: true --- ## Hello Hugo!  This is the first hugo blog. 最后执行hugo server，在本地部署，访问http://localhost:1313/可以查看效果\n❯ hugo server Start building sites … hugo v0.90.1+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 0 Processed images | 0 Aliases | 2 Sitemaps | 1 Cleaned | 0 Built in 16 ms Watching for changes in /Users/tao/Documents/hugo-blog/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/tao/Documents/hugo-blog/config.yaml Environment: \"development\" Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop PaperMod主题很丰富，需要通过config文件进行配置。\n2.5 Github Action配置 Github Action可以实现Push完成后自动编译并部署，所以需要创建文件.github/workflows/gh-pages.yml，最后将本地工程Push到gihub上即可。\nname: github pages on: push: branches: - main  # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == 'refs/heads/main' with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public push成功后可以查看Github Action进度。\n3. Typora与PicGo 3.1 PicGo安装与配置 通过brew install picgo --cask安装PicGo，用于图片上传，这里我使用的是SM.MS图床，注册账号并生成token即可使用，可以把上传时重命名勾选上。\n3.2 Typora安装与配置 通过brew install typora --cask安装Typora，目前1.0版本后是需要付费使用，0.11版本及之前是免费的；安装完Typora之后需要设置插入图片时的操作，比如在插入本地图片时将图片自动通过PicGo上传到SM.MS图床上，那么Markdown文件中就只需要通过Url显示图片了。\n4. 其它配置 4.1 PaperMod主题配置 参考PaperMod Wiki\nbaseURL: 'https://zhoutao822.github.io/' languageCode: en-us title: Tao's Notes theme: PaperMod paginate: 5 enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true params: env: production # to enable google analytics, opengraph, twitter-cards and schema. title: Tao's Notes description: \"Tao's learning notes\" keywords: [Blog, Portfolio, PaperMod] author: Me # author: [\"Me\", \"You\"] # multiple authors images: [\"\"] DateFormat: \"January 2, 2006\" defaultTheme: auto # dark, light disableThemeToggle: false ShowReadingTime: true ShowShareButtons: true ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: false disableSpecial1stPost: false disableScrollToTop: false comments: false hidemeta: false hideSummary: false showtoc: false tocopen: false assets: # disableHLJS: true # to disable highlight.js # disableFingerprinting: true favicon: \"\" favicon16x16: \"\" favicon32x32: \"\" apple_touch_icon: \"\" safari_pinned_tab: \"\" label: text: \"Home\" icon: /apple-touch-icon.png iconHeight: 35 # profile-mode profileMode: enabled: false # needs to be explicitly set title: ExampleSite subtitle: \"This is subtitle\" imageUrl: \"\" imageWidth: 120 imageHeight: 120 imageTitle: my image buttons: - name: Posts url: posts - name: Tags url: tags # home-info mode homeInfoParams: Title: \"Hi there \\U0001F44B\" Content: Welcome to my blog socialIcons: - name: twitter url: \"https://twitter.com/\" - name: stackoverflow url: \"https://stackoverflow.com\" - name: github url: \"https://github.com/\" analytics: google: SiteVerificationTag: \"XYZabc\" bing: SiteVerificationTag: \"XYZabc\" yandex: SiteVerificationTag: \"XYZabc\" cover: hidden: true # hide everywhere but not in structured data hiddenInList: true # hide on list pages and home hiddenInSingle: true # hide on single page editPost: URL: \"https://github.com/zhoutao822.github.io/content\" Text: \"Suggest Changes\" # edit text appendFilePath: true # to append file path to Edit link # for search # https://fusejs.io/api/options.html fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\"title\", \"permalink\", \"summary\", \"content\"] menu: main: - identifier: categories name: categories url: /categories/ weight: 10 - identifier: tags name: tags url: /tags/ weight: 20 - identifier: example name: example.org url: https://example.org weight: 30 # Read: https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma # pygmentsUseClasses: true # markup: # highlight: # # anchorLineNos: true # codeFences: true # guessSyntax: true # lineNos: true # style: monokai 4.2 MathJax支持 如果直接在Markdown中插入数学公式，在Typora中是可以正常显示，但是部署到Github Pages后是无法解析的，比如\n--- title: \"My First Post\" date: 2021-12-12T11:18:58+08:00 draft: false --- ## Hello Hugo! MathJax  $$ \\cos oldsymbol{x, y} = \\frac{\\sum x_iy_i}{|\\boldsymbol{x}||\\boldsymbol{y}|} $$ 因此需要借助JS库来实现Markdown中Mathjax的渲染，参考在Hugo中使用MathJax。首先创建一个文件layouts/partials/mathjax.html\n{{ if .Params.math }} script MathJax = { tex: { inlineMath: [[\"$\", \"$\"]], }, displayMath: [ [\"$$\", \"$$\"], [\"\\[\", \"\\]\"], ], svg: { fontCache: \"global\", }, }; script script src=\"https://polyfill.io/v3/polyfill.min.js?features=es6\"script script id=\"MathJax-script\" async src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"script {{ end }} 然后创建layouts/partials/extend_head.html，内容如下，引入mathjax.html；extend_head.html会被hugo自动加载到项目静态资源head.html中。\n{{- partial \"mathjax.html\" . }} 由于mathjax.html中使用了.Params.math，所以可以通过在Markdown文件头添加math: true字段实现按需渲染\n--- title: \"My First Post\" date: 2021-12-12T11:18:58+08:00 draft: false math: true --- 最后效果为\n4.3 utteranc评论系统 博客系统必不可少的就是评论系统，utteranc是一个基于Github的评论系统，它是一个Github App，它会将评论转为issue记录在仓库中，没有额外配置。首先安装\n然后创建一个文件layouts/partials/comments.html\n{{ if .Site.Params.utteranc.enable }} script src=\"https://utteranc.es/client.js\" repo=\"{{ .Site.Params.utteranc.repo }}\" issue-term=\"{{ .Site.Params.utteranc.issueTerm }}\" theme=\"{{ .Site.Params.utteranc.theme }}\" crossorigin=\"anonymous\" async script {{ end }} 最后修改config.yaml开启comments并且配置utteranc\nparams: comments: true utteranc: enable: true repo: \"zhoutao822/zhoutao822.github.io\" issueTerm: \"title\" theme: \"github-dark\" 可以到仓库的issue中查看到，此条评论被成功记录。\n参考  Hugo: Deploy Static Site using GitHub Actions Host on GitHub Quick Start utteranc hugo-PaperMod 在Hugo中使用MathJax 给hugo博客添加评论功能  ","wordCount":"889","inLanguage":"en","datePublished":"2021-12-12T11:18:58+08:00","dateModified":"2021-12-12T11:18:58+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhoutao822.github.io/posts/hugo-on-mac/"},"publisher":{"@type":"Organization","name":"Tao's Notes","logo":{"@type":"ImageObject","url":"https://zhoutao822.github.io/favicon.ico"}}}</script>
</head>
<body class=dark id=top>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://zhoutao822.github.io/ accesskey=h title="Home (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=https://zhoutao822.github.io/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://zhoutao822.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://zhoutao822.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://zhoutao822.github.io/series/ title=Series>
<span>Series</span>
</a>
</li>
<li>
<a href=https://zhoutao822.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://zhoutao822.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://zhoutao822.github.io/posts/>Posts</a></div>
<h1 class=post-title>
Hugo On Mac
</h1>
<div class=post-meta><span title="2021-12-12 11:18:58 +0800 +0800">December 12, 2021</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/Zhoutao822/zhoutao822.github.io/tree/main/content//posts/hugo-on-mac.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#1-github-pages%e8%ae%be%e7%bd%ae%e4%b8%8e%e9%85%8d%e7%bd%ae aria-label="1. Github Pages设置与配置">1. Github Pages设置与配置</a></li>
<li>
<a href=#2-hugo%e5%ae%89%e8%a3%85%e4%b8%8e%e4%bd%bf%e7%94%a8 aria-label="2. Hugo安装与使用">2. Hugo安装与使用</a><ul>
<li>
<a href=#21-hugo-install aria-label="2.1 Hugo Install">2.1 Hugo Install</a></li>
<li>
<a href=#22-hugo-init aria-label="2.2 Hugo Init">2.2 Hugo Init</a></li>
<li>
<a href=#23-hugo-theme aria-label="2.3 Hugo Theme">2.3 Hugo Theme</a></li>
<li>
<a href=#24-hugo-config aria-label="2.4 Hugo Config">2.4 Hugo Config</a></li>
<li>
<a href=#24-hugo-local-test aria-label="2.4 Hugo Local Test">2.4 Hugo Local Test</a></li>
<li>
<a href=#25-github-action%e9%85%8d%e7%bd%ae aria-label="2.5 Github Action配置">2.5 Github Action配置</a></li></ul>
</li>
<li>
<a href=#3-typora%e4%b8%8epicgo aria-label="3. Typora与PicGo">3. Typora与PicGo</a><ul>
<li>
<a href=#31-picgohttpspicgogithubiopicgo-doc%e5%ae%89%e8%a3%85%e4%b8%8e%e9%85%8d%e7%bd%ae aria-label="3.1 PicGo安装与配置">3.1 <a href=https://picgo.github.io/PicGo-Doc/>PicGo</a>安装与配置</a></li>
<li>
<a href=#32-typorahttpstyporaio%e5%ae%89%e8%a3%85%e4%b8%8e%e9%85%8d%e7%bd%ae aria-label="3.2 Typora安装与配置">3.2 <a href=https://typora.io/>Typora</a>安装与配置</a></li></ul>
</li>
<li>
<a href=#4-%e5%85%b6%e5%ae%83%e9%85%8d%e7%bd%ae aria-label="4. 其它配置">4. 其它配置</a><ul>
<li>
<a href=#41-papermod%e4%b8%bb%e9%a2%98%e9%85%8d%e7%bd%ae aria-label="4.1 PaperMod主题配置">4.1 PaperMod主题配置</a></li>
<li>
<a href=#42-mathjax%e6%94%af%e6%8c%81 aria-label="4.2 MathJax支持">4.2 MathJax支持</a></li>
<li>
<a href=#43-utteranc%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f aria-label="4.3 utteranc评论系统">4.3 utteranc评论系统</a></li></ul>
</li>
<li>
<a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h2 id=1-github-pages设置与配置>1. Github Pages设置与配置<a hidden class=anchor aria-hidden=true href=#1-github-pages设置与配置>#</a></h2>
<p>首先需要创建一个名称为<code>{OwnerName}.github.io</code>的Public仓库，如果仓库名称为其他，那么最终你的Github Pages的域名就不是<code>https://{OwnerName}.github.io</code>了，而是<code>https://{OwnerName}.github.io/{RepoName}</code>，而且如果这里不是Public而是Private的话，需要<strong>付费</strong>才能将Private仓库作为Github Pages使用。</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132303678.png alt=gHs9LituUfGZP1Q>
</p>
<p>然后创建一个新的分支<code>gh-pages</code>，这个用于后续通过Github Action部署Hugo的静态页面，作为Github Pages的主页；也就是说我们的<code>main</code>分支保存整个Hugo博客工程，而<code>gh-pages</code>分支保存自动生成的静态页面。在仓库Setting下设置Github Pages的Source为<code>gh-pages</code>分支，勾选上<code>Enforce HTTPS</code>，最终访问的域名就是<code>https</code>了。</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132304078.png alt=4CFL5oPfKSMBm8X>
</p>
<p>最后clone一下这个仓库的main分支到本地即可。</p>
<h2 id=2-hugo安装与使用>2. Hugo安装与使用<a hidden class=anchor aria-hidden=true href=#2-hugo安装与使用>#</a></h2>
<h3 id=21-hugo-install>2.1 Hugo Install<a hidden class=anchor aria-hidden=true href=#21-hugo-install>#</a></h3>
<p>直接通过<code>brew install hugo</code>即可，<code>Homebrew</code>如何安装可以参考官网<a href=https://brew.sh/>Homebrew</a>。安装完成后执行<code>hugo version</code>，打印结果如下表明安装成功：</p>
<pre tabindex=0><code>❯ hugo version
hugo v0.90.1+extended darwin/arm64 BuildDate=unknown
</code></pre><h3 id=22-hugo-init>2.2 Hugo Init<a hidden class=anchor aria-hidden=true href=#22-hugo-init>#</a></h3>
<p>在clone仓库之后，通过命令行进入到这个仓库的目录下执行<code>hugo new site . --force</code>，初始化Hugo工程，日志如下：</p>
<pre tabindex=0><code>❯ hugo new site . --force
Congratulations! Your new Hugo site is created in /Users/tao/Documents/hugo-blog.

Just a few more steps and you're ready to go:

1. Download a theme into the same-named folder.
   Choose a theme from https://themes.gohugo.io/ or
   create your own with the &quot;hugo new theme &lt;THEMENAME&gt;&quot; command.
2. Perhaps you want to add some content. You can add single files
   with &quot;hugo new &lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;&quot;.
3. Start the built-in live server via &quot;hugo server&quot;.

Visit https://gohugo.io/ for quickstart guide and full documentation.
</code></pre><p>使用<code>--force</code>是为了能在非空目录中创建Hugo工程。</p>
<h3 id=23-hugo-theme>2.3 Hugo Theme<a hidden class=anchor aria-hidden=true href=#23-hugo-theme>#</a></h3>
<p>在<a href=https://themes.gohugo.io/>Hugo Theme</a>上挑选一个自己喜欢的主题，然后通过git命令添加主题，以<code>PaperMod</code>为例</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>后续需要更新主题则执行</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git submodule update --remote --merge
</code></pre></div><p>如果主题安装成功，则项目目录下会多一个<code>.gitmodules</code>文件，内容为</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>❯ cat .gitmodules
<span style=color:#f92672>[</span>submodule <span style=color:#e6db74>&#34;themes/PaperMod&#34;</span><span style=color:#f92672>]</span>
	path <span style=color:#f92672>=</span> themes/PaperMod
	url <span style=color:#f92672>=</span> https://github.com/adityatelange/hugo-PaperMod.git
</code></pre></div><h3 id=24-hugo-config>2.4 Hugo Config<a hidden class=anchor aria-hidden=true href=#24-hugo-config>#</a></h3>
<p>然后修改config文件，默认情况下Hugo创建的是<code>config.toml</code>，这里可以删除这个文件，以<code>config.yaml</code>作为替代，依赖个人习惯决定即可；toml和yaml文件可以通过网站<a href=https://www.convertsimple.com/convert-toml-to-yaml/>Convert TOML to YAML</a>相互转换。</p>
<p>修改baseURL为Github Pages的域名，并添加<code>theme</code>字段</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>❯ cat config.yaml
baseURL: <span style=color:#e6db74>&#39;https://zhoutao822.github.io/&#39;</span>
languageCode: en-us
title: My New Hugo Site
theme: PaperMod
</code></pre></div><h3 id=24-hugo-local-test>2.4 Hugo Local Test<a hidden class=anchor aria-hidden=true href=#24-hugo-local-test>#</a></h3>
<p>如果上述步骤都完成了，可以通过<code>hugo new</code>创建一个示例Blog</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>❯ hugo new posts/my-first-post.md
Content <span style=color:#e6db74>&#34;/Users/tao/Documents/hugo-blog/content/posts/my-first-post.md&#34;</span> created
</code></pre></div><p>默认情况下Hugo会生成一些模板数据在Markdown中，比如<code>title</code>之类，这里如果需要把<code>draft</code>改为<code>false</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown>---
title: &#34;My First Post&#34;
date: 2021-12-12T11:18:58+08:00
draft: true
---

<span style=color:#75715e>## Hello Hugo!
</span><span style=color:#75715e></span>
This is the first hugo blog.
</code></pre></div><p>最后执行<code>hugo server</code>，在本地部署，访问<code>http://localhost:1313/</code>可以查看效果</p>
<pre tabindex=0><code>❯ hugo server
Start building sites … 
hugo v0.90.1+extended darwin/arm64 BuildDate=unknown

                   | EN  
-------------------+-----
  Pages            | 10  
  Paginator pages  |  0  
  Non-page files   |  0  
  Static files     |  0  
  Processed images |  0  
  Aliases          |  2  
  Sitemaps         |  1  
  Cleaned          |  0  

Built in 16 ms
Watching for changes in /Users/tao/Documents/hugo-blog/{archetypes,content,data,layouts,static,themes}
Watching for config changes in /Users/tao/Documents/hugo-blog/config.yaml
Environment: &quot;development&quot;
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
</code></pre><p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132304419.png alt=d8xn2DCkLGQJfbs>
</p>
<p><code>PaperMod</code>主题很丰富，需要通过<code>config</code>文件进行配置。</p>
<h3 id=25-github-action配置>2.5 Github Action配置<a hidden class=anchor aria-hidden=true href=#25-github-action配置>#</a></h3>
<p>Github Action可以实现Push完成后自动编译并部署，所以需要创建文件<code>.github/workflows/gh-pages.yml</code>，最后将本地工程Push到gihub上即可。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch to deploy</span>
  <span style=color:#f92672>pull_request</span>:

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-20.04</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
          <span style=color:#75715e># extended: true</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</code></pre></div><p>push成功后可以查看Github Action进度。</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132305454.png alt=J4Xtokv3ZCYbMdl>
</p>
<h2 id=3-typora与picgo>3. Typora与PicGo<a hidden class=anchor aria-hidden=true href=#3-typora与picgo>#</a></h2>
<h3 id=31-picgohttpspicgogithubiopicgo-doc安装与配置>3.1 <a href=https://picgo.github.io/PicGo-Doc/>PicGo</a>安装与配置<a hidden class=anchor aria-hidden=true href=#31-picgohttpspicgogithubiopicgo-doc安装与配置>#</a></h3>
<p>通过<code>brew install picgo --cask</code>安装PicGo，用于图片上传，这里我使用的是SM.MS图床，注册账号并生成token即可使用，可以把上传时重命名勾选上。</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132305375.png alt=o32KObQySRwemza>
</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132305522.png alt=WkbOBI3LKY4UiQZ>
</p>
<h3 id=32-typorahttpstyporaio安装与配置>3.2 <a href=https://typora.io/>Typora</a>安装与配置<a hidden class=anchor aria-hidden=true href=#32-typorahttpstyporaio安装与配置>#</a></h3>
<p>通过<code>brew install typora --cask</code>安装Typora，目前1.0版本后是需要付费使用，0.11版本及之前是免费的；安装完Typora之后需要设置插入图片时的操作，比如在插入本地图片时将图片自动通过PicGo上传到SM.MS图床上，那么Markdown文件中就只需要通过Url显示图片了。</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132305334.png alt=OAacZImENtKvCeS>
</p>
<h2 id=4-其它配置>4. 其它配置<a hidden class=anchor aria-hidden=true href=#4-其它配置>#</a></h2>
<h3 id=41-papermod主题配置>4.1 PaperMod主题配置<a hidden class=anchor aria-hidden=true href=#41-papermod主题配置>#</a></h3>
<p>参考<a href=https://github.com/adityatelange/hugo-PaperMod/wiki/Installation>PaperMod Wiki</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>baseURL</span>: <span style=color:#e6db74>&#39;https://zhoutao822.github.io/&#39;</span>
<span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>en-us</span>
<span style=color:#f92672>title</span>: <span style=color:#ae81ff>Tao&#39;s Notes</span>
<span style=color:#f92672>theme</span>: <span style=color:#ae81ff>PaperMod</span>
<span style=color:#f92672>paginate</span>: <span style=color:#ae81ff>5</span>

<span style=color:#f92672>enableRobotsTXT</span>: <span style=color:#66d9ef>true</span>
<span style=color:#f92672>buildDrafts</span>: <span style=color:#66d9ef>false</span>
<span style=color:#f92672>buildFuture</span>: <span style=color:#66d9ef>false</span>
<span style=color:#f92672>buildExpired</span>: <span style=color:#66d9ef>false</span>

<span style=color:#f92672>googleAnalytics</span>: <span style=color:#ae81ff>UA-123-45</span>

<span style=color:#f92672>minify</span>:
  <span style=color:#f92672>disableXML</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>minifyOutput</span>: <span style=color:#66d9ef>true</span>

<span style=color:#f92672>params</span>:
  <span style=color:#f92672>env</span>: <span style=color:#ae81ff>production</span> <span style=color:#75715e># to enable google analytics, opengraph, twitter-cards and schema.</span>
  <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Tao&#39;s Notes</span>
  <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Tao&#39;s learning notes&#34;</span>
  <span style=color:#f92672>keywords</span>: [<span style=color:#ae81ff>Blog, Portfolio, PaperMod]</span>
  <span style=color:#f92672>author</span>: <span style=color:#ae81ff>Me</span>
  <span style=color:#75715e># author: [&#34;Me&#34;, &#34;You&#34;] # multiple authors</span>
  <span style=color:#f92672>images</span>: [<span style=color:#e6db74>&#34;&lt;link or path of image for opengraph, twitter-cards&gt;&#34;</span>]
  <span style=color:#f92672>DateFormat</span>: <span style=color:#e6db74>&#34;January 2, 2006&#34;</span>
  <span style=color:#f92672>defaultTheme</span>: <span style=color:#ae81ff>auto</span> <span style=color:#75715e># dark, light</span>
  <span style=color:#f92672>disableThemeToggle</span>: <span style=color:#66d9ef>false</span>

  <span style=color:#f92672>ShowReadingTime</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>ShowShareButtons</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>ShowPostNavLinks</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>ShowBreadCrumbs</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>ShowCodeCopyButtons</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>disableSpecial1stPost</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>disableScrollToTop</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>comments</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>hidemeta</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>hideSummary</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>showtoc</span>: <span style=color:#66d9ef>false</span>
  <span style=color:#f92672>tocopen</span>: <span style=color:#66d9ef>false</span>

  <span style=color:#f92672>assets</span>:
    <span style=color:#75715e># disableHLJS: true # to disable highlight.js</span>
    <span style=color:#75715e># disableFingerprinting: true</span>
    <span style=color:#f92672>favicon</span>: <span style=color:#e6db74>&#34;&lt;link / abs url&gt;&#34;</span>
    <span style=color:#f92672>favicon16x16</span>: <span style=color:#e6db74>&#34;&lt;link / abs url&gt;&#34;</span>
    <span style=color:#f92672>favicon32x32</span>: <span style=color:#e6db74>&#34;&lt;link / abs url&gt;&#34;</span>
    <span style=color:#f92672>apple_touch_icon</span>: <span style=color:#e6db74>&#34;&lt;link / abs url&gt;&#34;</span>
    <span style=color:#f92672>safari_pinned_tab</span>: <span style=color:#e6db74>&#34;&lt;link / abs url&gt;&#34;</span>

  <span style=color:#f92672>label</span>:
    <span style=color:#f92672>text</span>: <span style=color:#e6db74>&#34;Home&#34;</span>
    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>/apple-touch-icon.png</span>
    <span style=color:#f92672>iconHeight</span>: <span style=color:#ae81ff>35</span>

  <span style=color:#75715e># profile-mode</span>
  <span style=color:#f92672>profileMode</span>:
    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e># needs to be explicitly set</span>
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>ExampleSite</span>
    <span style=color:#f92672>subtitle</span>: <span style=color:#e6db74>&#34;This is subtitle&#34;</span>
    <span style=color:#f92672>imageUrl</span>: <span style=color:#e6db74>&#34;&lt;img location&gt;&#34;</span>
    <span style=color:#f92672>imageWidth</span>: <span style=color:#ae81ff>120</span>
    <span style=color:#f92672>imageHeight</span>: <span style=color:#ae81ff>120</span>
    <span style=color:#f92672>imageTitle</span>: <span style=color:#ae81ff>my image</span>
    <span style=color:#f92672>buttons</span>:
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Posts</span>
        <span style=color:#f92672>url</span>: <span style=color:#ae81ff>posts</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Tags</span>
        <span style=color:#f92672>url</span>: <span style=color:#ae81ff>tags</span>

  <span style=color:#75715e># home-info mode</span>
  <span style=color:#f92672>homeInfoParams</span>:
    <span style=color:#f92672>Title</span>: <span style=color:#e6db74>&#34;Hi there \U0001F44B&#34;</span>
    <span style=color:#f92672>Content</span>: <span style=color:#ae81ff>Welcome to my blog</span>

  <span style=color:#f92672>socialIcons</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>twitter</span>
      <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://twitter.com/&#34;</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>stackoverflow</span>
      <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://stackoverflow.com&#34;</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>github</span>
      <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://github.com/&#34;</span>

  <span style=color:#f92672>analytics</span>:
    <span style=color:#f92672>google</span>:
      <span style=color:#f92672>SiteVerificationTag</span>: <span style=color:#e6db74>&#34;XYZabc&#34;</span>
    <span style=color:#f92672>bing</span>:
      <span style=color:#f92672>SiteVerificationTag</span>: <span style=color:#e6db74>&#34;XYZabc&#34;</span>
    <span style=color:#f92672>yandex</span>:
      <span style=color:#f92672>SiteVerificationTag</span>: <span style=color:#e6db74>&#34;XYZabc&#34;</span>

  <span style=color:#f92672>cover</span>:
    <span style=color:#f92672>hidden</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># hide everywhere but not in structured data</span>
    <span style=color:#f92672>hiddenInList</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># hide on list pages and home</span>
    <span style=color:#f92672>hiddenInSingle</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># hide on single page</span>

  <span style=color:#f92672>editPost</span>:
    <span style=color:#f92672>URL</span>: <span style=color:#e6db74>&#34;https://github.com/zhoutao822.github.io/content&#34;</span>
    <span style=color:#f92672>Text</span>: <span style=color:#e6db74>&#34;Suggest Changes&#34;</span> <span style=color:#75715e># edit text</span>
    <span style=color:#f92672>appendFilePath</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># to append file path to Edit link</span>

  <span style=color:#75715e># for search</span>
  <span style=color:#75715e># https://fusejs.io/api/options.html</span>
  <span style=color:#f92672>fuseOpts</span>:
    <span style=color:#f92672>isCaseSensitive</span>: <span style=color:#66d9ef>false</span>
    <span style=color:#f92672>shouldSort</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>location</span>: <span style=color:#ae81ff>0</span>
    <span style=color:#f92672>distance</span>: <span style=color:#ae81ff>1000</span>
    <span style=color:#f92672>threshold</span>: <span style=color:#ae81ff>0.4</span>
    <span style=color:#f92672>minMatchCharLength</span>: <span style=color:#ae81ff>0</span>
    <span style=color:#f92672>keys</span>: [<span style=color:#e6db74>&#34;title&#34;</span>, <span style=color:#e6db74>&#34;permalink&#34;</span>, <span style=color:#e6db74>&#34;summary&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>]
<span style=color:#f92672>menu</span>:
  <span style=color:#f92672>main</span>:
    - <span style=color:#f92672>identifier</span>: <span style=color:#ae81ff>categories</span>
      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>categories</span>
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>/categories/</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>10</span>
    - <span style=color:#f92672>identifier</span>: <span style=color:#ae81ff>tags</span>
      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>tags</span>
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>/tags/</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>20</span>
    - <span style=color:#f92672>identifier</span>: <span style=color:#ae81ff>example</span>
      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>example.org</span>
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://example.org</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>30</span>
<span style=color:#75715e># Read: https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma</span>
<span style=color:#75715e># pygmentsUseClasses: true</span>
<span style=color:#75715e># markup:</span>
<span style=color:#75715e>#     highlight:</span>
<span style=color:#75715e>#         # anchorLineNos: true</span>
<span style=color:#75715e>#         codeFences: true</span>
<span style=color:#75715e>#         guessSyntax: true</span>
<span style=color:#75715e>#         lineNos: true</span>
<span style=color:#75715e>#         style: monokai</span>
</code></pre></div><h3 id=42-mathjax支持>4.2 MathJax支持<a hidden class=anchor aria-hidden=true href=#42-mathjax支持>#</a></h3>
<p>如果直接在Markdown中插入数学公式，在Typora中是可以正常显示，但是部署到Github Pages后是无法解析的，比如</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown>---
title: &#34;My First Post&#34;
date: 2021-12-12T11:18:58+08:00
draft: false
---

<span style=color:#75715e>## Hello Hugo! MathJax
</span><span style=color:#75715e></span>
$$
\cos &lt;\b<span style=color:#f92672>oldsymbol</span><span style=color:#960050;background-color:#1e0010>{</span><span style=color:#a6e22e>x</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>y</span><span style=color:#960050;background-color:#1e0010>}</span>&gt; = \frac{\sum x_iy_i}{|\boldsymbol{x}||\boldsymbol{y}|}
$$
</code></pre></div><p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132306892.png alt=1h9InYPCp5AEkT3>
</p>
<p>因此需要借助JS库来实现Markdown中Mathjax的渲染，参考<a href=https://note.qidong.name/2018/03/hugo-mathjax/>在Hugo中使用MathJax</a>。首先创建一个文件<code>layouts/partials/mathjax.html</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ if .Params.math }}
&lt;<span style=color:#f92672>script</span>&gt;
    <span style=color:#a6e22e>MathJax</span> <span style=color:#f92672>=</span> {
        <span style=color:#a6e22e>tex</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>inlineMath</span><span style=color:#f92672>:</span> [[<span style=color:#e6db74>&#34;$&#34;</span>, <span style=color:#e6db74>&#34;$&#34;</span>]],
        },
        <span style=color:#a6e22e>displayMath</span><span style=color:#f92672>:</span> [
            [<span style=color:#e6db74>&#34;$$&#34;</span>, <span style=color:#e6db74>&#34;$$&#34;</span>],
            [<span style=color:#e6db74>&#34;\[&#34;</span>, <span style=color:#e6db74>&#34;\]&#34;</span>],
        ],
        <span style=color:#a6e22e>svg</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>fontCache</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;global&#34;</span>,
        },
    };
&lt;/<span style=color:#f92672>script</span>&gt;
&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://polyfill.io/v3/polyfill.min.js?features=es6&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MathJax-script&#34;</span> <span style=color:#a6e22e>async</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
{{ end }}
</code></pre></div><p>然后创建<code>layouts/partials/extend_head.html</code>，内容如下，引入<code>mathjax.html</code>；<code>extend_head.html</code>会被hugo自动加载到项目静态资源<code>head.html</code>中。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{- partial &#34;mathjax.html&#34; . }}
</code></pre></div><p>由于<code>mathjax.html</code>中使用了<code>.Params.math</code>，所以可以通过在Markdown文件头添加<code>math: true</code>字段实现按需渲染</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown>---
title: &#34;My First Post&#34;
date: 2021-12-12T11:18:58+08:00
draft: false
math: true
---
</code></pre></div><p>最后效果为</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132306087.png alt=oPtqYfX3QcuzMml>
</p>
<h3 id=43-utteranc评论系统>4.3 utteranc评论系统<a hidden class=anchor aria-hidden=true href=#43-utteranc评论系统>#</a></h3>
<p>博客系统必不可少的就是评论系统，utteranc是一个基于Github的评论系统，它是一个Github App，它会将评论转为issue记录在仓库中，没有额外配置。首先安装</p>
<p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132306191.png alt=lQhXsLu8viBdW5T>
</p>
<p>然后创建一个文件<code>layouts/partials/comments.html</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ if .Site.Params.utteranc.enable }}
&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://utteranc.es/client.js&#34;</span>
<span style=color:#a6e22e>repo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.Params.utteranc.repo }}&#34;</span>
<span style=color:#a6e22e>issue-term</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.Params.utteranc.issueTerm }}&#34;</span>
<span style=color:#a6e22e>theme</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.Params.utteranc.theme }}&#34;</span>
<span style=color:#a6e22e>crossorigin</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anonymous&#34;</span>
<span style=color:#a6e22e>async</span>&gt;
&lt;/<span style=color:#f92672>script</span>&gt;
{{ end }}
</code></pre></div><p>最后修改<code>config.yaml</code>开启comments并且配置utteranc</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>params</span>:
  <span style=color:#f92672>comments</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>utteranc</span>:
    <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>repo</span>: <span style=color:#e6db74>&#34;zhoutao822/zhoutao822.github.io&#34;</span>
    <span style=color:#f92672>issueTerm</span>: <span style=color:#e6db74>&#34;title&#34;</span>
    <span style=color:#f92672>theme</span>: <span style=color:#e6db74>&#34;github-dark&#34;</span>
</code></pre></div><p><img loading=lazy src=https://gitee.com/tao2333/hugo-pic/raw/master/pictures/202112132306067.png alt=GW8ztbqhgiKxZMI>
</p>
<p>可以到仓库的issue中查看到，此条评论被成功记录。</p>
<h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2>
<ol>
<li><a href=https://ruddra.com/hugo-deploy-static-page-using-github-actions/>Hugo: Deploy Static Site using GitHub Actions</a></li>
<li><a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>Host on GitHub</a></li>
<li><a href=https://gohugo.io/getting-started/quick-start/>Quick Start</a></li>
<li><a href=https://utteranc.es/>utteranc</a></li>
<li><a href=https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite>hugo-PaperMod</a></li>
<li><a href=https://note.qidong.name/2018/03/hugo-mathjax/>在Hugo中使用MathJax</a></li>
<li><a href=https://zhuanlan.zhihu.com/p/351055497>给hugo博客添加评论功能</a></li>
</ol>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://zhoutao822.github.io/tags/hugo/>hugo</a></li>
<li><a href=https://zhoutao822.github.io/tags/github-pages/>github pages</a></li>
<li><a href=https://zhoutao822.github.io/tags/typora/>typora</a></li>
<li><a href=https://zhoutao822.github.io/tags/picgo/>picgo</a></li>
<li><a href=https://zhoutao822.github.io/tags/mathjax/>mathjax</a></li>
<li><a href=https://zhoutao822.github.io/tags/utteranc/>utteranc</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://zhoutao822.github.io/posts/hugo-theme-papermod/>
<span class=title>« Prev Page</span>
<br>
<span>Hugo Theme PaperMod</span>
</a>
</nav>
</footer>
<script src=https://utteranc.es/client.js repo=zhoutao822/zhoutao822.github.io issue-term=title theme=github-dark crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://zhoutao822.github.io/>Tao's Notes</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>